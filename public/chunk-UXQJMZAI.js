import{a as L}from"./chunk-MNJCX6HE.js";import{a as G}from"./chunk-2T5LEQTV.js";import{a as $}from"./chunk-UW666MUF.js";import{a as P}from"./chunk-HZMAKCER.js";import{a as K}from"./chunk-PDI3HUYS.js";import"./chunk-DKJA5FGH.js";import"./chunk-WGZ3CRYS.js";import{b as W,d as z,f as O,n as Y}from"./chunk-ASKZ6QKQ.js";import{j as N}from"./chunk-4PVG4ZNA.js";import{D as C,Ja as w,La as H,Pa as y,Qa as k,Ra as E,Sa as M,Ta as n,U as S,Ua as o,Va as h,Y as p,Ya as v,Z as d,Za as u,_a as g,db as V,eb as s,gb as I,ib as T,jb as B,kb as A,mb as F,pb as D,qb as j,ua as b,xa as m,ya as _}from"./chunk-OW2OVBTG.js";import{d as J,e as x}from"./chunk-5FZOKLP6.js";var f=J(K());function Q(l,a){l&1&&(n(0,"div",0)(1,"div",1)(2,"div",19)(3,"h4",20),s(4,"Cargando"),o(),h(5,"i",21),n(6,"p",22),s(7,"Por favor espere"),o()()()())}function R(l,a){if(l&1){let c=v();n(0,"tr")(1,"th")(2,"img",23),u("click",function(){let i=p(c).$implicit,r=g();return d(r.openModal(i))}),D(3,"img"),o()(),n(4,"td")(5,"input",24),A("ngModelChange",function(t){let r=p(c).$implicit;return B(r.name,t)||(r.name=t),d(t)}),o()(),n(6,"td",25)(7,"a",26),u("click",function(){let i=p(c).$implicit,r=g();return d(r.updateHospital(i))}),h(8,"i",27),o(),s(9," \xA0 "),n(10,"a",28),u("click",function(){let i=p(c).$implicit,r=g();return d(r.deleteHospitals(i))}),h(11,"i",29),o()()()}if(l&2){let c=a.$implicit;m(2),H("src",j(3,2,c.img,"hospitals"),b),m(3),T("ngModel",c.name)}}var se=(()=>{let a=class a{constructor(e,t,i){this.hospitalService=e,this.modalService=t,this.searchService=i,this.hospitals=[],this.loading=!1}ngOnDestroy(){this.imgSub?.unsubscribe()}ngOnInit(){this.findHospitals(),this.imgSub=this.modalService.newImg.pipe(C(100)).subscribe(e=>{this.findHospitals()})}findHospitals(){this.hospitalService.findHospitals().subscribe(e=>{this.hospitals=e,this.loading=!0})}updateHospital(e){this.hospitalService.updateHospital(e.name,e.id).subscribe(t=>{f.default.fire("Actualizado",e.name,"success")})}deleteHospitals(e){f.default.fire({title:"Deleted Hospital?",text:`Are you sure delete the hospital ${e.name}`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&this.hospitalService.deleteHospital(e.id).subscribe(i=>{i.ok&&(f.default.fire({title:"Deleted!",text:"Your file has been deleted.",icon:"success"}),this.findHospitals())})})}apenSweetAlet(){return x(this,null,function*(){let{value:e=""}=yield f.default.fire({title:"Agregar Hospital",input:"text",text:"Ingrese el nombre",inputPlaceholder:"Enter the name",showCancelButton:!0});if(e.trim().length>0)this.hospitalService.createHospital(e).subscribe(t=>{t.ok&&this.findHospitals()});else return;console.log(e)})}search(e){e.trim().length<=0||this.searchService.search("hospitals",e).subscribe(t=>{this.hospitals=t})}openModal(e){this.modalService.openModal("hospitals",e)}};a.\u0275fac=function(t){return new(t||a)(_(L),_($),_(P))},a.\u0275cmp=S({type:a,selectors:[["app-hospitals"]],standalone:!0,features:[F],decls:33,vars:2,consts:[[1,"row","animated","fadeIn","fast"],[1,"col-12"],[1,"card"],[1,"card-body"],["type","text","placeholder","Buscar hospitales",1,"form-control","my-3",3,"keyup"],["txtHospital",""],[1,"row"],["class","row animated fadeIn fast"],[1,"col-8"],[1,"card-title"],[1,"col"],[1,"d-flex","justify-content-end","mt-3"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-hospital-o"],[1,"table-responsive"],[1,"table","table-hover"],["scope","col",1,"w100"],["scope","col"],["scope","col",1,"text-center","w100"],["role","alert",1,"alert","alert-info","text-center"],[1,"alert-heading"],[1,"fa","fa-spin","fa-refresh","fa-2x"],[1,"mb-0"],["alt","",1,"avatar","cursor",3,"src","click"],["type","text","placeholder","Nombre del hospital",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-nowrap","text-center"],["data-toggle","tooltip","data-original-title","Guardar cambios",1,"cursor",3,"click"],[1,"fa","fa-pencil","text-inverse","m-r-10"],["data-toggle","tooltip","data-original-title","Borrar",1,"cursor",3,"click"],[1,"fa","fa-close","text-danger"]],template:function(t,i){if(t&1){let r=v();n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4,5),u("keyup",function(){p(r);let q=V(5);return d(i.search(q.value))}),o()()()()(),n(6,"div",6),w(7,Q,8,0,"div",7),n(8,"div",1)(9,"div",2)(10,"div",3)(11,"div",6)(12,"div",8)(13,"h5",9),s(14),o()(),n(15,"div",10)(16,"div",11)(17,"button",12),u("click",function(){return i.apenSweetAlet()}),h(18,"i",13),s(19," Add "),o()()()(),n(20,"div",14)(21,"table",15)(22,"thead")(23,"tr")(24,"th",16),s(25,"Imagen"),o(),n(26,"th",17),s(27,"Name"),o(),n(28,"th",18),s(29,"Actions"),o()()(),n(30,"tbody"),E(31,R,12,5,"tr",null,k),o()()()()()()()}t&2&&(m(7),y(7,i.loading?-1:7),m(7),I("Hospitals (",i.hospitals.length,")"),m(17),M(i.hospitals))},dependencies:[N,G,Y,W,z,O]});let l=a;return l})();export{se as HospitalsComponent};
