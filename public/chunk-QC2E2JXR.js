import{a as C}from"./chunk-VDPMKNQX.js";import{a as M}from"./chunk-PDI3HUYS.js";import{a as y}from"./chunk-HKRDGOX6.js";import"./chunk-DKJA5FGH.js";import"./chunk-WGZ3CRYS.js";import{b as U,c as p,d as k,e as I,g as N,h as F,i as T,m as z,o as D}from"./chunk-ASKZ6QKQ.js";import{j as _}from"./chunk-4PVG4ZNA.js";import{Ja as E,La as s,Pa as x,Ta as e,U as w,Ua as t,Va as n,Za as b,_a as S,eb as r,fb as g,mb as P,ua as c,xa as o,ya as v}from"./chunk-OW2OVBTG.js";import{d as R}from"./chunk-5FZOKLP6.js";var u=R(M());function j(m,d){if(m&1&&n(0,"img",52),m&2){let f=S();s("src",f.user==null?null:f.user.getImageUrl,c)}}function q(m,d){if(m&1&&n(0,"img",52),m&2){let f=S();s("src",f.imgTemp,c)}}var J=(()=>{let d=class d{constructor(l,a,i){this.userService=l,this.fb=a,this.fileUploadService=i,this.user=this.userService.user}ngOnInit(){this.profileForm=this.fb.group({name:[this.user?.name,p.required],email:[this.user?.email,[p.required,p.email]],role:["USER_ROLE",p.required]})}updateProfile(){console.log(this.profileForm.value),this.userService.updateUser(this.profileForm.value).subscribe(l=>{let{name:a,email:i}=this.profileForm.value;this.user.name=a,this.user.email=i,u.default.fire("Guardado","Usuario actualizado con \xE9xito!","success")},l=>{u.default.fire("Error",l.error.msg,"error")})}cambiarImagen(l){if(this.imageSubir=l.target.files[0],!this.imageSubir){this.imgTemp=null;return}let a=new FileReader,i=a.readAsDataURL(this.imageSubir);a.onloadend=()=>{this.imgTemp=a.result}}subirImagen(){this.fileUploadService.updatePhoto(this.imageSubir,"users",this.user?.id||"").then(l=>{this.user.img=l,u.default.fire("Guardado","Imagen actualizada con \xE9xito","success")}).catch(l=>{console.log(l),u.default.fire("Error","No se pudo subir la imagen","error")})}};d.\u0275fac=function(a){return new(a||d)(v(y),v(z),v(C))},d.\u0275cmp=w({type:d,selectors:[["app-profile"]],standalone:!0,features:[P],decls:101,vars:9,consts:[[1,"section","profile"],[1,"row"],[1,"col-xl-4"],[1,"card"],[1,"card-body","profile-card","pt-4","d-flex","flex-column","align-items-center"],["alt","Profile",1,"rounded-circle",3,"src"],[1,"text-center"],[1,"social-links","mt-2"],["href","#",1,"twitter"],[1,"bi","bi-twitter"],["href","https://www.facebook.com/profile.php?id=100008719261494","target","_blank",1,"facebook"],[1,"bi","bi-facebook"],["href","https://www.instagram.com/rafael.f_riv/","target","_blank",1,"instagram"],[1,"bi","bi-instagram"],["href","https://www.linkedin.com/in/rafael-adonis-flores-rivera-1321942a0/","target","_blank",1,"linkedin"],[1,"bi","bi-linkedin"],[1,"col-xl-8"],[1,"card-body","pt-3"],[1,"nav","nav-tabs","nav-tabs-bordered"],[1,"nav-item"],["data-bs-toggle","tab","data-bs-target","#profile-overview",1,"nav-link","active"],["data-bs-toggle","tab","data-bs-target","#profile-edit",1,"nav-link"],["data-bs-toggle","tab","data-bs-target","#profile-settings",1,"nav-link"],["data-bs-toggle","tab","data-bs-target","#profile-change-password",1,"nav-link"],[1,"tab-content","pt-2"],["id","profile-overview",1,"tab-pane","fade","show","active","profile-overview"],[1,"card-title"],[1,"col-lg-3","col-md-4","label"],[1,"col-lg-9","col-md-8"],["alt","Profile","width","60px",3,"src"],["id","profile-edit",1,"tab-pane","fade","profile-edit","pt-3"],[3,"formGroup","ngSubmit"],[1,"row","mb-3"],["for","User Name",1,"col-md-4","col-lg-3","col-form-label"],[1,"col-md-8","col-lg-9"],["name","fullName","type","text","id","fullName","formControlName","name",1,"form-control"],["for","Email",1,"col-md-4","col-lg-3","col-form-label"],["name","email","type","email","id","Email","formControlName","email",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["id","profile-settings",1,"tab-pane","fade","pt-3"],["for","fullName",1,"col-md-4","col-lg-3","col-form-label"],["alt","","class","img-avatar",3,"src"],["type","file","id","File",1,"form-control",3,"change"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["id","profile-change-password",1,"tab-pane","fade","pt-3"],["for","currentPassword",1,"col-md-4","col-lg-3","col-form-label"],["name","password","type","password","id","currentPassword",1,"form-control"],["for","newPassword",1,"col-md-4","col-lg-3","col-form-label"],["name","newpassword","type","password","id","newPassword",1,"form-control"],["for","renewPassword",1,"col-md-4","col-lg-3","col-form-label"],["name","renewpassword","type","password","id","renewPassword",1,"form-control"],["type","submit",1,"btn","btn-primary"],["alt","",1,"img-avatar",3,"src"]],template:function(a,i){a&1&&(e(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),n(5,"img",5),e(6,"h2"),r(7),t(),e(8,"h3",6),r(9,"Software Engineer"),t(),e(10,"div",7)(11,"a",8),n(12,"i",9),t(),e(13,"a",10),n(14,"i",11),t(),e(15,"a",12),n(16,"i",13),t(),e(17,"a",14),n(18,"i",15),t()()()()(),e(19,"div",16)(20,"div",3)(21,"div",17)(22,"ul",18)(23,"li",19)(24,"button",20),r(25," Overview "),t()(),e(26,"li",19)(27,"button",21),r(28," Edit Profile "),t()(),e(29,"li",19)(30,"button",22),r(31," Edit Photo "),t()(),e(32,"li",19)(33,"button",23),r(34," Change Password "),t()()(),e(35,"div",24)(36,"div",25)(37,"h5",26),r(38,"Profile Details"),t(),e(39,"div",1)(40,"div",27),r(41,"Image Profile"),t(),e(42,"div",28),n(43,"img",29),t()(),e(44,"div",1)(45,"div",27),r(46,"User Name"),t(),e(47,"div",28),r(48),t()(),e(49,"div",1)(50,"div",27),r(51,"Email"),t(),e(52,"div",28),r(53),t()()(),e(54,"div",30)(55,"form",31),b("ngSubmit",function(){return i.updateProfile()}),e(56,"div",32)(57,"label",33),r(58,"User Name"),t(),e(59,"div",34),n(60,"input",35),t()(),e(61,"div",32)(62,"label",36),r(63,"Email"),t(),e(64,"div",34),n(65,"input",37),t()(),e(66,"div",6)(67,"button",38),r(68," Save Changes "),t()()()(),e(69,"div",39)(70,"div",32)(71,"label",40),r(72,"Edit Photo"),t()(),e(73,"div",6),E(74,j,1,1,"img",41)(75,q,1,1),t(),e(76,"div",32)(77,"input",42),b("change",function(G){return i.cambiarImagen(G)}),t()(),e(78,"div",6)(79,"button",43),b("click",function(){return i.subirImagen()}),r(80," Save Changes "),t()()(),e(81,"div",44)(82,"form")(83,"div",32)(84,"label",45),r(85,"Current Password"),t(),e(86,"div",34),n(87,"input",46),t()(),e(88,"div",32)(89,"label",47),r(90,"New Password"),t(),e(91,"div",34),n(92,"input",48),t()(),e(93,"div",32)(94,"label",49),r(95,"Re-enter New Password"),t(),e(96,"div",34),n(97,"input",50),t()(),e(98,"div",6)(99,"button",51),r(100," Change Password "),t()()()()()()()()()()),a&2&&(o(5),s("src",i.user==null?null:i.user.getImageUrl,c),o(2),g(i.user==null?null:i.user.name),o(36),s("src",i.user==null?null:i.user.getImageUrl,c),o(5),g(i.user==null?null:i.user.name),o(5),g(i.user==null?null:i.user.email),o(2),s("formGroup",i.profileForm),o(12),s("disabled",i.profileForm.invalid),o(7),x(74,i.imgTemp?75:74),o(5),s("disabled",!i.imageSubir))},dependencies:[_,D,N,U,k,I,F,T]});let m=d;return m})();export{J as ProfileComponent};
